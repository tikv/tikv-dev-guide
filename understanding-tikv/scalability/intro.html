<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Scalability - TiKV Development Guide</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../favicon.png">
        
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        
        <link rel="stylesheet" href="../../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> TiKV Development Guide</a></li><li class="chapter-item expanded "><a href="../../get-started/intro.html"><strong aria-hidden="true">2.</strong> Get Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../get-started/build-tikv-from-source.html"><strong aria-hidden="true">2.1.</strong> Build TiKV from Source</a></li><li class="chapter-item expanded "><a href="../../get-started/import-tikv-into-an-ide.html"><strong aria-hidden="true">2.2.</strong> Import TiKV into an IDE</a></li><li class="chapter-item expanded "><a href="../../get-started/write-and-run-unit-tests.html"><strong aria-hidden="true">2.3.</strong> Write and Run Unit Tests</a></li><li class="chapter-item expanded "><a href="../../get-started/debug-and-profile.html"><strong aria-hidden="true">2.4.</strong> Debug and Profile</a></li><li class="chapter-item expanded "><a href="../../get-started/submit-a-pull-request.html"><strong aria-hidden="true">2.5.</strong> Submit a Pull Request</a></li></ol></li><li class="chapter-item expanded "><a href="../../contribute-to-tikv/intro.html"><strong aria-hidden="true">3.</strong> Contribute to TiKV</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../contribute-to-tikv/community-guideline.html"><strong aria-hidden="true">3.1.</strong> Community Guideline</a></li><li class="chapter-item expanded "><a href="../../contribute-to-tikv/committer-guide.html"><strong aria-hidden="true">3.2.</strong> Committer Guide</a></li><li class="chapter-item expanded "><a href="../../contribute-to-tikv/report-a-bug.html"><strong aria-hidden="true">3.3.</strong> Report a Bug</a></li><li class="chapter-item expanded "><a href="../../contribute-to-tikv/contribute-code.html"><strong aria-hidden="true">3.4.</strong> Contribute code</a></li><li class="chapter-item expanded "><a href="../../contribute-to-tikv/review-a-pull-request.html"><strong aria-hidden="true">3.5.</strong> Review a Pull Request</a></li><li class="chapter-item expanded "><a href="../../contribute-to-tikv/request-for-comments.html"><strong aria-hidden="true">3.6.</strong> Request for Comments</a></li><li class="chapter-item expanded "><a href="../../contribute-to-tikv/code-style-and-quality-guide.html"><strong aria-hidden="true">3.7.</strong> Code Style and Quality Guide</a></li><li class="chapter-item expanded "><a href="../../contribute-to-tikv/write-document.html"><strong aria-hidden="true">3.8.</strong> Write document</a></li></ol></li><li class="chapter-item expanded "><a href="../../understanding-tikv/intro.html"><strong aria-hidden="true">4.</strong> Understanding TiKV</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/overview/intro.html"><strong aria-hidden="true">4.1.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/overview/raw-kv.html"><strong aria-hidden="true">4.1.1.</strong> Raw KV</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/overview/transaction-kv.html"><strong aria-hidden="true">4.1.2.</strong> Transaction KV</a></li></ol></li><li class="chapter-item expanded "><a href="../../understanding-tikv/scalability/intro.html" class="active"><strong aria-hidden="true">4.2.</strong> Scalability</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/scalability/region.html"><strong aria-hidden="true">4.2.1.</strong> Region</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/scalability/scheduling.html"><strong aria-hidden="true">4.2.2.</strong> Scheduling</a></li></ol></li><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/intro.html"><strong aria-hidden="true">4.3.</strong> High Availability</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/raft/intro.html"><strong aria-hidden="true">4.3.1.</strong> Raft</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/raft/raft-rs.html"><strong aria-hidden="true">4.3.1.1.</strong> raft-rs</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/raft/leader-lease.html"><strong aria-hidden="true">4.3.1.2.</strong> Leader Lease</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/raft/hibernate-region.html"><strong aria-hidden="true">4.3.1.3.</strong> Hibernate Region</a></li></ol></li><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/multi-raft/intro.html"><strong aria-hidden="true">4.3.2.</strong> Multi-Raft</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/multi-raft/split.html"><strong aria-hidden="true">4.3.2.1.</strong> Split</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/multi-raft/merge.html"><strong aria-hidden="true">4.3.2.2.</strong> Merge</a></li></ol></li><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/raftstore/intro.html"><strong aria-hidden="true">4.3.3.</strong> RaftStore</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/raftstore/actor-model.html"><strong aria-hidden="true">4.3.3.1.</strong> Actor Model</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/high-availability/raftstore/fsm.html"><strong aria-hidden="true">4.3.3.2.</strong> FSM</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/intro.html"><strong aria-hidden="true">4.4.</strong> Transaction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/percolator/intro.html"><strong aria-hidden="true">4.4.1.</strong> Percolator</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/percolator/tso.html"><strong aria-hidden="true">4.4.1.1.</strong> TSO</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/percolator/encode.html"><strong aria-hidden="true">4.4.1.2.</strong> Encode</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/percolator/command.html"><strong aria-hidden="true">4.4.1.3.</strong> Command</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/percolator/latch-and-scheduler.html"><strong aria-hidden="true">4.4.1.4.</strong> Latch and Scheduler</a></li></ol></li><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/pessimistic-transaction.html"><strong aria-hidden="true">4.4.2.</strong> Pessimistic Transaction</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/async-commit.html"><strong aria-hidden="true">4.4.3.</strong> Async Commit</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/1pc.html"><strong aria-hidden="true">4.4.4.</strong> 1PC</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/stale-read.html"><strong aria-hidden="true">4.4.5.</strong> Stale Read</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/transaction/cdc.html"><strong aria-hidden="true">4.4.6.</strong> CDC</a></li></ol></li><li class="chapter-item expanded "><a href="../../understanding-tikv/storage/intro.html"><strong aria-hidden="true">4.5.</strong> Storage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/storage/rocksdb.html"><strong aria-hidden="true">4.5.1.</strong> RocksDB</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/storage/encode.html"><strong aria-hidden="true">4.5.2.</strong> Encode</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/storage/import-and-export.html"><strong aria-hidden="true">4.5.3.</strong> Import and Export</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/storage/io-rate-limiter.html"><strong aria-hidden="true">4.5.4.</strong> IO Rate Limiter</a></li></ol></li><li class="chapter-item expanded "><a href="../../understanding-tikv/coprocessor/intro.html"><strong aria-hidden="true">4.6.</strong> Coprocessor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../understanding-tikv/coprocessor/tidb-expression-executor.html"><strong aria-hidden="true">4.6.1.</strong> TiDB Expression Executor</a></li><li class="chapter-item expanded "><a href="../../understanding-tikv/coprocessor/coprocessor-plugin.html"><strong aria-hidden="true">4.6.2.</strong> Coprocessor Plugin</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">TiKV Development Guide</h1>

                    <div class="right-buttons">
                        
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/tisonkun/tikv-dev-guide" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="scalability"><a class="header" href="#scalability">Scalability</a></h1>
<p>In the database field, <code>Scalability</code> is the term we use to describe the capability of a system to handle a growing amount of storage or computation. Even if a system is working reliably and fast on a small scale today, it doesn't mean it will necessarily work well in the future, especially when the increased load exceeds what the system can process. In modern systems, the amount of data we have to process can far outgrow our original expectations, so scalability is a critical consideration for the design of a database.</p>
<p>There are two main types of scalability:</p>
<ol>
<li>
<p>Vertical scaling, which is also known as <strong>scaling up</strong>, means adding resources to a single node in a system, typically involving the improvement of CPU, memory, or storage, to become a more powerful single computer. Vertical scaling is limited by the technology of the semiconductor industry, and the cost per hertz of CPU or byte of memory/storage will increase dramatically when near the technical limit.</p>
</li>
<li>
<p>Horizontal scaling, which is also known as <strong>scaling out</strong>, means adding more machines to a system and distributing the load across multiple smaller machines. As computer prices have dropped and performance continues to increase, high-performance computing applications have adopted low-cost commodity systems for tasks. System architects may deploy hundreds of small computers in a cluster, to obtain aggregate computing power that is far more powerful than a system based on a stand-alone single computer. Moreover, with the widespread use of <a href="https://en.wikipedia.org/wiki/Cloud_computing">Cloud computing</a> technology, horizontal scalable is necessary for a system to adapt to the resiliency of Cloud.</p>
</li>
</ol>
<p>A system whose performance improves after adding hardware, proportionally to the added quantity, is said to be a scalable system. It's obvious that a scalable system depends on the ability of horizontal scaling.</p>
<p>TiKV is a highly scalable key-value store, especially comparing with other stand-alone key-value stores like <a href="https://rocksdb.org/">RocksDB</a> and <a href="https://github.com/google/leveldb">LevelDB</a>.</p>
<p>To be scalable, TiKV needs to solve the following problems:</p>
<ol>
<li>
<p>Partitioning: how to break data up into partitions, also known as <em>sharding</em>, to fully utilize resources of nodes in cluster. In TiKV, a partition is called a <code>Region</code>.</p>
</li>
<li>
<p>Scheduling: how to distribute the Regions in cluster, for balancing the load among all nodes, and eliminating hot spots or other bottle necks.</p>
</li>
</ol>
<p>In the rest of this chapter, we will talk about <code>Region</code> and <code>Scheduling</code> of TiKV.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../understanding-tikv/overview/transaction-kv.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../understanding-tikv/scalability/region.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../understanding-tikv/overview/transaction-kv.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../understanding-tikv/scalability/region.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
